import { LitElement, html, css } from "lit";
import "./counter-app.js"; // Adjust path as necessary

class App extends LitElement {
    static get properties() {
        return {
            counters: { type: Array }
        };
    }

    constructor() {
        super();
        this.counters = [
            { id: 1, value: 0, min: 0, max: 25 },
            { id: 2, value: 0, min: 0, max: 25 }
        ];
    }

    static get styles() {
        return css`
            .main {
                text-align: center;
                padding: 20px;
            }
            .button {
                margin: 10px;
                padding: 10px 20px;
            }
        `;
    }

    render() {
        return html`
            <div class="main">
                <h1>Counter App</h1>
                <button @click=${this.resetAll} class="button">Reset All</button>
                ${this.counters.map(counter => html`
                    <counter-app 
                        .count="${counter.value}" 
                        .min="${counter.min}" 
                        .max="${counter.max}" 
                        .id="${counter.id}"
                        @delete="${(e) => this.handleDelete(e.detail.id)}">
                    </counter-app>
                `)}
            </div>
        `;
    }

    resetAll() {
        this.counters = this.counters.map(c => ({ ...c, value: c.min }));
    }

    handleDelete(counterId) {
        this.counters = this.counters.filter(c => c.id !== counterId);
    }
}

customElements.define("my-app", App);
